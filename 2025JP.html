<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>å®¢è£½åŒ–æ—…è¡Œè¡Œç¨‹</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <style>
        /* åŸºç¤ Reset & è®Šæ•¸ - æº«æš–æ·ºç±³é»ƒè‰²ä¸»é¡Œ (Cream/Beige Theme) */
        :root {
            --cream-bg: #FAF9F6; /* æŸ”å’Œæ·ºç±³é»ƒè‰²èƒŒæ™¯ */
            --surface-color: #FFFFFF; /* å¡ç‰‡è¡¨é¢è‰² */
            --dark-text: #3D3D3D; /* æ·±å’–å•¡è‰²/æŸ”å’Œæ·±ç°æ–‡å­— */
            --secondary-text: #554949; /* æ¬¡è¦æ–‡å­— (æ¯”ä¸»æ–‡æ·º) */
            --primary-color: #8D6EFB; /* ä¸»è‰²èª¿ï¼šæŸ”å’Œé«˜é›…çš„ç´«è‰² */
            --accent-color: #6C5CE7; /* ä¸»è‰²èª¿çš„æ·±è‰²ç‰ˆï¼Œç”¨æ–¼ hover */
            --soft-border: #D0CFCB; /* æŸ”å’Œçš„ç°æ£•è‰²é‚Šæ¡†/åˆ†éš”ç·š */
            --padding-base: 16px;
            --radius-base: 12px; /* ä¸­ç­‰åˆ°å¤§çš„åœ“è§’ */
            --font-family: 'Helvetica Neue', Arial, sans-serif;
            --timeline-line-color: var(--soft-border);
            /* æŸ”å’Œé™°å½± */
            --soft-shadow: 0 4px 10px rgba(0, 0, 0, 0.05); 
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-family);
            background-color: var(--cream-bg);
            color: var(--dark-text);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* App å®¹å™¨èˆ‡ Safe Area */
        #app {
            padding-top: calc(env(safe-area-inset-top) + var(--padding-base));
            padding-bottom: env(safe-area-inset-bottom);
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        /* é ‚éƒ¨æ¨™é¡Œèˆ‡æ§åˆ¶é … */
        header {
            padding: 0 var(--padding-base) var(--padding-base);
        }

        .trip-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 8px;
            color: var(--secondary-text); /* æ¨™é¡Œä½¿ç”¨æ·±å’–å•¡è‰² */
        }

        .date-control {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: var(--surface-color);
            padding: 10px;
            border-radius: var(--radius-base);
            margin-bottom: var(--padding-base);
            box-shadow: var(--soft-shadow); /* æŸ”å’Œé™°å½± */
            border: 1px solid var(--soft-border);
        }

        .date-control button {
            background: none;
            border: none;
            color: var(--secondary-text);
            font-size: 1.5rem;
            padding: 5px 10px;
            cursor: pointer;
            transition: background-color 0.2s, color 0.2s;
            border-radius: 8px;
        }
        
        /* æ—¥æœŸåˆ‡æ›æŒ‰éˆ• hover æ•ˆæœ */
        .date-control button:hover:not(:disabled) {
            background-color: var(--cream-bg); 
            color: var(--primary-color);
        }
        

        .date-control button:disabled {
            color: var(--soft-border);
            opacity: 0.7;
            cursor: not-allowed;
        }

        .current-date-display {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--dark-text);
        }

        /* ä»Šæ—¥è¡Œç¨‹æ¦‚è¦½ */
        .today-summary {
            background-color: var(--surface-color);
            margin: 0 var(--padding-base) var(--padding-base);
            padding: var(--padding-base);
            border-radius: var(--radius-base);
            box-shadow: var(--soft-shadow);
            border: 1px solid var(--soft-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .city-info h3 {
            font-size: 1.3rem;
            margin-bottom: 4px;
            color: var(--dark-text);
        }

        .weather-info {
            text-align: right;
            font-size: 1rem;
            color: var(--secondary-text);
        }

        .weather-info .icon {
            font-size: 1.5rem;
            margin-bottom: 4px;
            color: #FFD700; /* é™½å…‰é»ƒä¿æŒé®®è±” */
        }

        /* è¡Œç¨‹æ¸…å–® (Timeline å€) */
        .trip-list-container {
            flex-grow: 1;
            overflow-y: auto;
            padding: 0 var(--padding-base) var(--padding-base);
        }

        .timeline {
            position: relative;
            padding-left: 30px; 
        }

        .timeline::before {
            content: '';
            position: absolute;
            top: 0;
            left: 10px;
            width: 2px;
            height: 100%;
            background-color: var(--timeline-line-color); /* æŸ”å’Œçš„ç°æ£•ç·š */
        }

        .timeline-item {
            position: relative;
            padding-bottom: 25px;
            padding-left: 20px;
        }

        .timeline-item:last-child {
            padding-bottom: 0;
        }
        
        /* è®“è¡Œç¨‹é …ç›®å¯é»æ“Š */
        .item-content {
            cursor: pointer; 
            background-color: var(--surface-color);
            padding: 15px;
            border-radius: var(--radius-base);
            box-shadow: var(--soft-shadow);
            border: 1px solid var(--soft-border); /* å¢åŠ è¼•å¾®é‚Šæ¡† */
            display: grid;
            grid-template-areas:
                "icon type time"
                "icon name name";
            grid-template-columns: 30px 1fr auto;
            gap: 5px 10px;
            align-items: center;
            transition: transform 0.1s, box-shadow 0.1s;
        }

        .item-content:hover {
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08); /* ç¨å¾®å¼·ä¸€é»çš„ hover é™°å½± */
        }
        
        .item-content:active {
            transform: scale(0.99); /* é»æ“Šæ™‚è¼•å¾®ç¸®å° */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }


        .timeline-dot {
            position: absolute;
            top: 0;
            left: -20px; 
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: var(--primary-color);
            border: 3px solid var(--cream-bg); /* é‚Šæ¡†ä½¿ç”¨èƒŒæ™¯è‰² */
            z-index: 10;
        }

        .item-icon {
            grid-area: icon;
            font-size: 1.4rem;
            text-align: center;
            /* åœ–æ¨™é¡è‰²ä¿æŒé®®è±”ï¼Œä¸éš¨ä¸»é¡Œè‰²è®Šæ›´ */
        }
        
        /* èª¿æ•´ç‰¹å®šé¡å‹åœ–æ¨™é¡è‰² (ä¿ç•™è‡ªå®šç¾©é®®è±”è‰²) */
        .item-icon[data-type="FLIGHT"] { color: #3498DB; } 
        .item-icon[data-type="HOTEL"] { color: #2ECC71; } 
        .item-icon[data-type="CAR"] { color: #F39C12; } 
        .item-icon[data-type="FOOD"] { color: #E74C3C; } 
        .item-icon[data-type="ACTIVITY"] { color: #9B59B6; } 
        .item-icon[data-type="TRANSPORT"] { color: #3498DB; }

        .item-type {
            grid-area: type;
            font-size: 0.8rem;
            font-weight: 500;
            color: var(--secondary-text);
            text-transform: uppercase;
        }

        .item-time, .item-name {
            color: var(--dark-text); /* æ‰€æœ‰æ–‡å­—ä½¿ç”¨æ·±è‰² */
        }

        /* Modal å½ˆå‡ºè¦–çª—æ¨£å¼ */
        #modal-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: none; 
            background-color: rgba(0, 0, 0, 0.4); /* åŠé€æ˜æ·±è‰²ç–Šå±¤ */
            z-index: 1000;
            display: flex; 
            flex-direction: column;
            justify-content: flex-end; 
            align-items: center;
        }
        
        #modal-container.is-visible {
            display: flex;
        }
        
        .modal-content {
            background-color: var(--surface-color); /* Modal ä¸»é«”èƒŒæ™¯ç”¨å¡ç‰‡è‰² */
            width: 100%;
            max-width: 600px; 
            border-top-left-radius: 20px;
            border-top-right-radius: 20px;
            padding: var(--padding-base);
            padding-bottom: calc(var(--padding-base) + env(safe-area-inset-bottom)); 
            max-height: 90vh; 
            overflow-y: auto;
            transform: translateY(100%); 
            transition: transform 0.3s ease-out; 
        }
        
        .modal-content.slide-in {
            transform: translateY(0); 
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--padding-base);
            padding-bottom: 10px;
            border-bottom: 1px solid var(--soft-border); /* æŸ”å’Œåˆ†éš”ç·š */
        }
        
        .modal-header h2 {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--dark-text);
        }
        
        .close-modal-btn {
            background: none;
            border: none;
            color: var(--secondary-text);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 5px;
            line-height: 1;
        }
        
        .modal-body h3 {
            font-size: 1.1rem;
            color: var(--primary-color);
            margin-bottom: 8px;
        }
        
        .modal-notes {
            background-color: var(--cream-bg); /* å‚™è¨»å€å¡Šç”¨ä¸»èƒŒæ™¯è‰²å€éš” */
            padding: 12px;
            border-radius: var(--radius-base);
            font-size: 0.95rem;
            color: var(--dark-text);
            white-space: pre-wrap; 
            border: 1px solid var(--soft-border);
        }
        
        /* å°èˆªæŒ‰éˆ•æ¨£å¼ */
        .map-btn {
            display: block;
            width: 100%;
            padding: 12px;
            margin-top: var(--padding-base);
            background-color: var(--primary-color); /* ä¸»è‰²èª¿ç´«è‰² */
            color: white; /* å°èˆªæŒ‰éˆ•æ–‡å­—ä½¿ç”¨ç™½è‰²ä¿æŒé«˜å°æ¯”åº¦ */
            border: none;
            border-radius: var(--radius-base);
            font-size: 1.1rem;
            font-weight: 600;
            text-align: center;
            text-decoration: none; 
            transition: background-color 0.2s;
        }
        
        .map-btn:hover {
            background-color: var(--accent-color);
        }
        
        /* RWD èª¿æ•´ (é‡å°æ‰‹æ©Ÿè¨­è¨ˆï¼Œç„¡éœ€å¤ªå¤š Breakpoint) */
        @media (max-width: 480px) {
            .trip-title {
                font-size: 1.6rem;
            }
            .item-content {
                padding: 12px;
                gap: 5px;
            }
        }

    </style>
</head>
<body>
    <div id="app">
        <header>
            <div class="trip-title">2025 åŒ—æµ·é“ä¹‹æ—…</div>

            <!-- æ—¥æœŸåˆ‡æ›å€ -->
            <div class="date-control">
                <button id="prev-day" aria-label="ä¸Šä¸€å¤©">ã€ˆ</button>
                <div class="current-date-display" id="current-date"></div>
                <button id="next-day" aria-label="ä¸‹ä¸€å¤©">ã€‰</button>
            </div>
        </header>

        <!-- ä»Šæ—¥è¡Œç¨‹æ¦‚è¦½ -->
        <div class="today-summary">
            <div class="city-info">
                <h3 id="current-city"></h3>
                <p>Day <span id="current-day-num"></span></p>
            </div>
            <div class="weather-info">
                <div class="icon" id="current-weather-icon"></div>
                <div id="current-weather"></div>
            </div>
        </div>

        <!-- è¡Œç¨‹æ¸…å–® (Timeline) -->
        <main class="trip-list-container">
            <div class="timeline" id="trip-timeline">
                <!-- è¡Œç¨‹é»å°‡ç”± JS æ¸²æŸ“è‡³æ­¤ -->
            </div>
        </main>
    </div>

    <!-- å½ˆå‡ºè¦–çª—å®¹å™¨ -->
    <div id="modal-container">
        <!-- Modal å…§å®¹å°‡ç”± JS æ¸²æŸ“è‡³æ­¤ -->
    </div>

    <script>
        // è¡Œç¨‹ç¯„ä¾‹è³‡æ–™ (JSON é™£åˆ—)
        const tripData = [
            // DAY 1: æŠµé”æ—¥ (2025.08.09)
            {
                date: '2025.08.09 (å…­)',
                dayNum: 1,
                city: 'æ–°åƒæ­²',
                weather: 'æœªçŸ¥',
                weatherIcon: 'âœˆï¸',
                activities: [
                    { id: 101, time: '12:45', type: 'FLIGHT', name: 'TR892 æ¡ƒåœ’å‡ºç™¼', icon: 'ğŸ›«', notes: 'ç™»æ©Ÿæ™‚é–“ 12:15ï¼Œè«‹é ç•™å……è£•æ™‚é–“ã€‚' },
                    { id: 102, time: '17:45', type: 'FLIGHT', name: 'æŠµé”æ–°åƒæ­²åœ‹éš›æ©Ÿå ´ (CTS)', icon: 'ğŸ›¬', notes: 'è«‹åœ¨åœ‹éš›ç·šèˆªå»ˆé™è½å¾Œï¼Œæº–å‚™å¥½å…¥å¢ƒè³‡æ–™ã€‚' },
                    { id: 103, time: '18:30', type: 'HOTEL', name: 'åŒ—æµ·é“å¸•æ‰˜å§†åœ‹éš›é£¯åº— Check-in', icon: 'ğŸ¨', notes: 'é£¯åº—ä½æ–¼åœ‹éš›ç·šæ—…å®¢èˆªå»ˆ 4~8Fã€‚' },
                    { id: 104, time: '19:30', type: 'FOOD', name: '(æ™š) æ©Ÿä¸Šæä¾›é¤é£Ÿ/æ©Ÿå ´ç°¡æ˜“æ™šé¤', icon: 'ğŸœ', notes: 'è‹¥æ©Ÿä¸Šé¤é£Ÿä¸å¤ ï¼Œå¯åœ¨æ©Ÿå ´ä¾¿åˆ©åº—è§£æ±ºã€‚' },
                ]
            },
            // DAY 2: æœ­å¹Œ (2025.08.10)
            {
                date: '2025.08.10 (æ—¥)',
                dayNum: 2,
                city: 'æœ­å¹Œ',
                weather: 'æœªçŸ¥',
                weatherIcon: 'ğŸš—',
                activities: [
                    { id: 201, time: '07:30', type: 'FOOD', name: '(æ—©) é£¯åº—ç°¡æ˜“æ—©é¤', icon: 'ğŸ¥', notes: 'ç„¡' },
                    { id: 202, time: '09:30', type: 'CAR', name: 'Orix æ–°åƒæ­²æ©Ÿå ´åº— é ç´„ç§Ÿè»Š', icon: 'ğŸ”‘', notes: 'é ç´„æ™‚é–“ 09:30ï¼Œè«‹ç¢ºèªé§•ç…§å’Œåœ‹éš›é§•ç…§æº–å‚™é½Šå…¨ã€‚' },
                    { id: 203, time: '11:30', type: 'FOOD', name: 'å°æ¨½ä¸‰è§’å¸‚å ´ï¼šé±—å‹æœå¸‚æˆ–ä¸‰è§’æœå¸‚ (åˆé¤)', icon: 'ğŸ¦€', notes: 'ä¸‰è§’å¸‚å ´åœè»Šå ´æ¶ˆè²» Â¥2,000 å¯å…åœè»Šè²»ã€‚' },
                    { id: 204, time: '14:00', type: 'ACTIVITY', name: 'å°æ¨½å ºç”ºé€šå•†åº—è¡— (éŸ³æ¨‚ç›’å ‚/åŒ—ä¸€ç¡å­)', icon: 'ğŸ””', notes: 'é ç•™æ™‚é–“ç´„ 2-3 å°æ™‚ï¼Œå¯å“åš LeTAO ç”œé»ã€‚' },
                    { id: 205, time: '18:30', type: 'FOOD', name: 'å™å™è‹‘ æœ­å¹Œè–„é‡åº— é ç´„æ™šé¤', icon: 'ğŸ¥©', notes: 'å·²åœ¨å®˜ç¶²é ç´„ 18:30ï¼Œè«‹å‡ºç¤ºé ç´„ä¿¡ã€‚' },
                    { id: 206, time: '20:30', type: 'HOTEL', name: 'å”è‰é£¯åº—æœ­å¹Œ Check-in', icon: 'ğŸ›ï¸', notes: 'Check-in 15:00ï¼ŒCheck-out 12:00ã€‚' },
                ]
            },
            // DAY 3: æœ­å¹ŒéƒŠå€/è³¼ç‰© (2025.08.11)
            {
                date: '2025.08.11 (ä¸€)',
                dayNum: 3,
                city: 'æœ­å¹Œ',
                weather: 'æœªçŸ¥',
                weatherIcon: 'ğŸ›ï¸',
                activities: [
                    { id: 301, time: '08:00', type: 'FOOD', name: '(æ—©) é£¯åº—ç°¡æ˜“æ—©é¤', icon: 'ğŸ¥', notes: 'å«æ—©é¤' },
                    { id: 302, time: '09:30', type: 'ACTIVITY', name: 'Costco æœ­å¹Œå€‰åº«åº—', icon: 'ğŸ›’', notes: 'ç‡Ÿæ¥­æ™‚é–“ 10:00-20:00ï¼Œè¨­æœ‰å¹³é¢åŠç«‹é«”åœè»Šå ´ã€‚' },
                    { id: 303, time: '12:30', type: 'FOOD', name: '(åˆ) ä¸‰äº•OUTLET è‡ªç†', icon: 'ğŸ”', notes: 'ç„¡' },
                    { id: 304, time: '14:30', type: 'ACTIVITY', name: 'åŒ—å»£å³¶ä¸‰äº•OUTLET PARK', icon: 'ğŸ‘—', notes: 'å¯ä¸‹è¼‰ç„¡é™è¬å“©éŠå„ªæƒ åˆ¸ã€‚' },
                    { id: 305, time: '17:30', type: 'ACTIVITY', name: 'ç‹¸å°è·¯å•†åº—è¡—', icon: 'ğŸ›ï¸', notes: 'å¯é€› BIC CAMERAã€PARCOã€LUSH ç­‰ï¼Œéœ€èµ°è·¯ã€‚' },
                    { id: 306, time: '19:30', type: 'FOOD', name: '(æ™š) ç‹¸å°è·¯è‡ªç†', icon: 'ğŸ¢', notes: 'å¯è€ƒæ…® Suage+ æ¹¯å’–å“©æˆ–æ•˜æ•˜è‹‘ç‡’è‚‰ã€‚' },
                ]
            },
            // DAY 4: ç™»åˆ¥ (2025.08.12)
            {
                date: '2025.08.12 (äºŒ)',
                dayNum: 4,
                city: 'ç™»åˆ¥',
                weather: 'æœªçŸ¥',
                weatherIcon: 'â™¨ï¸',
                activities: [
                    { id: 401, time: '08:00', type: 'FOOD', name: '(æ—©) é£¯åº—ç°¡æ˜“æ—©é¤', icon: 'ğŸ¥', notes: 'å«æ—©é¤' },
                    { id: 402, time: '11:00', type: 'ACTIVITY', name: 'ES CON FIELD çƒå ´å°è¦½ (é ç´„æ™‚é–“)', icon: 'ğŸŸï¸', notes: 'è«‹æ–¼ Coca-Cola GATE å…§å ±åˆ°ï¼Œæ™‚é•·ç´„ 50 åˆ†é˜ã€‚' },
                    { id: 403, time: '12:30', type: 'FOOD', name: '(åˆ) ES CON FIELD è‡ªç†', icon: 'ğŸ•', notes: 'çƒå ´å…§æœ‰å¤šå…ƒç¾é£Ÿå€ã€‚' },
                    { id: 404, time: '15:30', type: 'ACTIVITY', name: 'å®¤è˜­å’–å•¡å»³ (ä¾‹å¦‚: THE LAMP ROOM CAFE)', icon: 'â˜•', notes: 'é–‹è»Šå‰å¾€ç™»åˆ¥é€”ä¸­å¯åœç•™å®¤è˜­ã€‚' },
                    { id: 405, time: '17:30', type: 'ACTIVITY', name: 'ç™»åˆ¥åœ°ç„è°·/æº«æ³‰è¡—', icon: 'ğŸŒ‹', notes: 'åœ°ç„è°·åœè»Šå ´æœ‰æ”¶è²»ã€‚' },
                    { id: 406, time: '19:00', type: 'HOTEL', name: 'ç¬¬ä¸€ç€§æœ¬é¤¨ Check-in & æº«æ³‰è¡— (æ™š)', icon: 'â™¨ï¸', notes: 'æ­¤é£¯åº—ä¸å«æ—©é¤ã€‚Check-in 14:00ã€‚' },
                ]
            },
            // DAY 5: å‡½é¤¨ (2025.08.13)
            {
                date: '2025.08.13 (ä¸‰)',
                dayNum: 5,
                city: 'å‡½é¤¨',
                weather: 'æœªçŸ¥',
                weatherIcon: 'â›°ï¸',
                activities: [
                    { id: 501, time: '08:00', type: 'FOOD', name: '(æ—©) é£¯åº—é™„è¿‘è‡ªç†', icon: 'ğŸ¥ª', notes: 'ç¬¬ä¸€ç€§æœ¬é¤¨ä¸å«æ—©é¤ã€‚' },
                    { id: 502, time: '10:30', type: 'TRANSPORT', name: 'è·¯éå…«é›²ãƒ»å¤§æ²¼åœ‹å®šå…¬åœ’', icon: 'ğŸï¸', notes: 'å…«é›²é“è·¯ä¼‘æ¯ç«™å¯è³¼è²·ä¹³è£½å“ã€‚' },
                    { id: 503, time: '12:30', type: 'FOOD', name: '(åˆ) å…«é›²é“è·¯ä¼‘æ¯ç«™', icon: 'ğŸ¥›', notes: 'å¯åœ¨æ­¤ä¼‘æ¯ä¸¦ç”¨é¤ã€‚' },
                    { id: 504, time: '16:00', type: 'HOTEL', name: 'å‡½é¤¨ç’°çƒæ™¯è§€é£¯åº— Check-in', icon: 'ğŸ›ï¸', notes: 'Check-in 15:00ï¼Œå«æ—©é¤ã€‚' },
                    { id: 505, time: '18:30', type: 'FOOD', name: 'ã¨ã‚“å¹³ å‡½é¤¨é§…å‰åº— (æ™š)', icon: 'ğŸ·', notes: 'å¯æ›¿æ›ç‚ºå…¶ä»–å‡½é¤¨å¸‚å€ç¾é£Ÿã€‚' },
                    { id: 506, time: '20:00', type: 'ACTIVITY', name: 'å‡½é¤¨å±±å¤œæ™¯', icon: 'âœ¨', notes: 'è‹¥çºœè»Šåœé§›å‰‡éœ€æ­ä¹˜å·´å£«ã€‚' },
                ]
            },
            // DAY 6: å‡½é¤¨å¸‚å€ (2025.08.14)
            {
                date: '2025.08.14 (å››)',
                dayNum: 6,
                city: 'å‡½é¤¨',
                weather: 'æœªçŸ¥',
                weatherIcon: 'ğŸ—¼',
                activities: [
                    { id: 601, time: '08:00', type: 'FOOD', name: '(æ—©) é£¯åº—ç°¡æ˜“è‡ªç†', icon: 'ğŸ¥', notes: 'å«æ—©é¤' },
                    { id: 602, time: '09:30', type: 'ACTIVITY', name: 'äº”ç¨œéƒ­å¡” & äº”ç¨œéƒ­å…¬åœ’', icon: 'ğŸ¯', notes: 'åœè»Šå ´åœ¨å¡”æ¨“æ—é‚Šã€‚äº”ç¨œéƒ­å¡”é–€ç¥¨ Â¥1,200/äºº (ç¶²è·¯æˆ–ä¾¿åˆ©åº—å¯èƒ½æœ‰æŠ˜æ‰£)ã€‚' },
                    { id: 603, time: '12:00', type: 'FOOD', name: '(åˆ) å‡½é¤¨æœå¸‚/å°ä¸‘å¹¸é‹æ¼¢å ¡', icon: 'ğŸ”', notes: 'æœå¸‚ 14:00 çµæŸç‡Ÿæ¥­ã€‚' },
                    { id: 604, time: '14:30', type: 'ACTIVITY', name: 'é‡‘æ£®ç´…ç£šå€‰åº«/å…«å¹¡å‚', icon: 'ğŸ˜ï¸', notes: 'ç´…ç£šå€‰åº«ç‡Ÿæ¥­æ™‚é–“ 09:30-19:00ã€‚' },
                    { id: 605, time: '19:00', type: 'FOOD', name: '(æ™š) å¸‚å€è‡ªç†', icon: 'ğŸ£', notes: 'ç„¡' },
                ]
            },
            // DAY 7: æ­¸åœ‹ (2025.08.15)
            {
                date: '2025.08.15 (äº”)',
                dayNum: 7,
                city: 'å‡½é¤¨',
                weather: 'æœªçŸ¥',
                weatherIcon: 'ğŸ¡',
                activities: [
                    { id: 701, time: '08:00', type: 'FOOD', name: '(æ—©) é£¯åº—ç°¡æ˜“è‡ªç†', icon: 'ğŸ¥', notes: 'å«æ—©é¤' },
                    { id: 702, time: '09:30', type: 'CAR', name: 'Orix å‡½é¤¨æ©Ÿå ´åº— é ç´„é‚„è»Š', icon: 'ğŸ”‘', notes: 'éœ€é ç•™ 20 åˆ†é˜è»Šç¨‹è‡³æ©Ÿå ´ã€‚' },
                    { id: 703, time: '12:30', type: 'FLIGHT', name: 'IT237 å‡½é¤¨ HKD å‡ºç™¼', icon: 'ğŸ›«', notes: 'Boarding Time 12:00ã€‚' },
                    { id: 704, time: '15:45', type: 'FLIGHT', name: 'æŠµé”æ¡ƒåœ’ TPE', icon: 'ğŸ›¬', notes: 'ç„¡' },
                    { id: 705, time: '17:00', type: 'TRANSPORT', name: 'æ­é«˜éµè¿”å®¶', icon: 'ğŸš„', notes: 'ç„¡' },
                ]
            },
        ];

        // ç•¶å‰é¸ä¸­çš„è¡Œç¨‹æ—¥æœŸ (åˆå§‹åŒ–ç‚º Day 1)
        let currentTripIndex = 0;

        // DOM å…ƒç´ å¼•ç”¨
        const currentDateEl = document.getElementById('current-date');
        const currentCityEl = document.getElementById('current-city');
        const currentDayNumEl = document.getElementById('current-day-num');
        const currentWeatherEl = document.getElementById('current-weather');
        const currentWeatherIconEl = document.getElementById('current-weather-icon');
        const tripTimelineEl = document.getElementById('trip-timeline');
        const prevDayBtn = document.getElementById('prev-day');
        const nextDayBtn = document.getElementById('next-day');
        const modalContainerEl = document.getElementById('modal-container');

        /**
         * æ¸²æŸ“è¡Œç¨‹ç´°ç¯€
         */
        function renderTripDetails(index) {
            const currentDay = tripData[index];
            if (!currentDay) return;

            // 1. æ›´æ–°é ‚éƒ¨æ¦‚è¦½è³‡è¨Š
            currentDateEl.textContent = currentDay.date;
            currentCityEl.textContent = currentDay.city;
            currentDayNumEl.textContent = currentDay.dayNum;
            currentWeatherEl.textContent = currentDay.weather;
            currentWeatherIconEl.textContent = currentDay.weatherIcon || 'â˜€ï¸';

            // 2. æ¸…ç©ºä¸¦æ¸²æŸ“è¡Œç¨‹é»
            tripTimelineEl.innerHTML = '';
            currentDay.activities.forEach(activity => {
                // å°‡å®Œæ•´çš„ activity JSON è½‰ç‚ºå­—ä¸²ï¼Œå­˜å…¥ data-activity å±¬æ€§
                const activityJson = encodeURIComponent(JSON.stringify(activity));
                
                const itemHtml = `
                    <div class="timeline-item">
                        <div class="timeline-dot"></div>
                        <div class="item-content" data-activity='${activityJson}'>
                            <div class="item-icon" data-type="${activity.type}">${activity.icon}</div>
                            <div class="item-type">${activity.type.replace('TRANSPORT', 'ç§»å‹•/äº¤é€š')}</div>
                            <div class="item-time">${activity.time}</div>
                            <div class="item-name">${activity.name}</div>
                        </div>
                    </div>
                `;
                tripTimelineEl.insertAdjacentHTML('beforeend', itemHtml);
            });
            
            // 3. æ·»åŠ é»æ“Šäº‹ä»¶ç›£è½å™¨ (é‡è¦!)
            attachActivityListeners();

            // 4. èª¿æ•´æ—¥æœŸåˆ‡æ›æŒ‰éˆ•çš„ç‹€æ…‹
            prevDayBtn.disabled = currentTripIndex === 0;
            nextDayBtn.disabled = currentTripIndex === tripData.length - 1;
        }

        /**
         * ç‚ºæ¯å€‹è¡Œç¨‹é …ç›®æ·»åŠ é»æ“Šç›£è½å™¨
         */
        function attachActivityListeners() {
            document.querySelectorAll('.item-content').forEach(item => {
                item.addEventListener('click', (event) => {
                    // å¾ data å±¬æ€§å–å‡ºæ´»å‹• JSON å­—ä¸²ä¸¦è§£æå›ç‰©ä»¶
                    const activityJson = event.currentTarget.getAttribute('data-activity');
                    // decodeURIComponent å’Œ JSON.parse æ˜¯ç‚ºäº†å°‡å„²å­˜çš„å­—ä¸²è®Šå›ç¨‹å¼èƒ½ç”¨çš„ç‰©ä»¶
                    const activity = JSON.parse(decodeURIComponent(activityJson)); 
                    showModal(activity);
                });
            });
        }

        /**
         * è™•ç†æ—¥æœŸåˆ‡æ›
         */
        function changeDay(offset) {
            const newIndex = currentTripIndex + offset;
            if (newIndex >= 0 && newIndex < tripData.length) {
                currentTripIndex = newIndex;
                renderTripDetails(currentTripIndex);
            }
        }
        
        /**
         * é¡¯ç¤º Modal å½ˆå‡ºè¦–çª—
         */
        function showModal(activity) {
            // 1. å»ºç«‹ Google Maps å°èˆª URL
            // encodeURIComponent ç¢ºä¿è¡Œç¨‹åç¨±ä¸­çš„ç‰¹æ®Šç¬¦è™Ÿèƒ½è¢«ç¶²å€æ¥å—
            const mapUrl = `https://maps.google.com/?q=${encodeURIComponent(activity.name)}`;

            // 2. å»ºç«‹ Modal å…§å®¹ HTML
            const modalContent = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>${activity.icon} ${activity.name}</h2>
                        <button class="close-modal-btn" onclick="closeModal()">Ã—</button>
                    </div>
                    <div class="modal-body">
                        <h3>å‚™è¨» / è©³ç´°è³‡è¨Š</h3>
                        <pre class="modal-notes">${activity.notes || 'ç„¡é¡å¤–å‚™è¨»ã€‚'}</pre>
                        
                        <a href="${mapUrl}" target="_blank" class="map-btn">
                            Google Maps å°èˆª
                        </a>
                    </div>
                </div>
            `;
            
            // 3. æ¸²æŸ“å…§å®¹ä¸¦é¡¯ç¤º Modal
            modalContainerEl.innerHTML = modalContent;
            modalContainerEl.classList.add('is-visible');
            
            // 4. è§¸ç™¼æ»‘å…¥å‹•ç•«
            // é€™æ˜¯å¯¦ç¾æ»‘å…¥æ•ˆæœçš„æŠ€å·§ï¼šå…ˆè¨­å®šå…ƒç´ åœ¨è¢å¹•å¤–ï¼Œå†åœ¨æ¥µçŸ­æ™‚é–“å¾Œå°‡å®ƒç§»å› (åŠ ä¸Š slide-in class)
            setTimeout(() => {
                modalContainerEl.querySelector('.modal-content').classList.add('slide-in');
            }, 10);
        }
        
        /**
         * é—œé–‰ Modal å½ˆå‡ºè¦–çª—
         */
        function closeModal() {
            const contentEl = modalContainerEl.querySelector('.modal-content');
            
            // è§¸ç™¼æ»‘å‡ºå‹•ç•« (ç§»é™¤ slide-in class)
            if (contentEl) {
                contentEl.classList.remove('slide-in');
            }
            
            // åœ¨å‹•ç•«çµæŸå¾Œéš±è—å®¹å™¨ (å‹•ç•«æ™‚é–“ç‚º 0.3s)
            setTimeout(() => {
                modalContainerEl.classList.remove('is-visible');
                modalContainerEl.innerHTML = ''; 
            }, 300);
        }

        // å°‡ closeModal å‡½æ•¸æš´éœ²çµ¦å…¨åŸŸç’°å¢ƒï¼Œè®“ HTML å…§åµŒçš„ onclick å¯ä»¥èª¿ç”¨
        window.closeModal = closeModal;


        // äº‹ä»¶ç›£è½å™¨
        prevDayBtn.addEventListener('click', () => changeDay(-1));
        nextDayBtn.addEventListener('click', () => changeDay(1));

        // æ‡‰ç”¨ç¨‹å¼å•Ÿå‹•ï¼šæ¸²æŸ“ Day 1
        document.addEventListener('DOMContentLoaded', () => {
            renderTripDetails(currentTripIndex);
        });
    </script>
</body>
</html>